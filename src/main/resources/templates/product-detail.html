<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fashion Store - 상품 상세</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<header class="header">
    <div class="container">
        <div class="logo">
            <h1><a th:href="@{/}">Fashion Store</a></h1>
        </div>
        <nav class="nav">
            <div class="nav-buttons">
                <button onclick="goToMyPage()">마이페이지</button>
                <button onclick="goToCart()">장바구니 (<span id="cartCount">0</span>)</button>
                <button onclick="goToLogin()" id="loginBtn">로그인</button>
                <button onclick="logout()" id="logoutBtn" style="display: none;">로그아웃</button>
            </div>
        </nav>
    </div>
</header>

<main class="main">
    <div class="container">
        <!-- 뒤로가기 버튼 -->
        <button class="back-btn" onclick="goBack()">
            ← 상품 목록으로
        </button>

        <!-- 상품 상세 정보 -->
        <div class="product-detail-container">
            <div class="product-detail-grid">
                <!-- 상품 이미지 -->
                <div class="product-image-large" id="productImageLarge">
                    <!-- JavaScript로 동적 생성 -->
                </div>

                <!-- 상품 정보 -->
                <div class="product-info-detail">
                    <div class="product-category" id="productCategory"></div>
                    <h1 class="product-title" id="productTitle"></h1>
                    <div class="product-price-large" id="productPriceLarge"></div>

                    <!-- 평점 정보 -->
                    <div class="rating-info">
                        <div class="stars" id="averageStars"></div>
                        <span class="rating-score" id="averageRating">0.0</span>
                        <span class="review-count" id="reviewCount">(0개 리뷰)</span>
                    </div>

                    <!-- 상품 설명 -->
                    <div class="product-description">
                        <h3>상품 설명</h3>
                        <p id="productDescription"></p>
                    </div>

                    <!-- 구매 버튼 -->
                    <button class="add-to-cart-btn-large" onclick="addToCartFromDetail()">
                        🛒 장바구니 담기
                    </button>
                </div>
            </div>
        </div>

        <!-- 리뷰 섹션 -->
        <div class="review-section">
            <h2>상품 리뷰</h2>

            <!-- 리뷰 작성 -->
            <div class="review-write-container" id="reviewWriteContainer">
                <div class="review-write-card">
                    <h3>리뷰 작성</h3>
                    <form id="reviewForm" onsubmit="submitReview(event)">
                        <div class="form-group">
                            <label>평점</label>
                            <div class="star-rating" id="starRating">
                                <span class="star" data-rating="1">★</span>
                                <span class="star" data-rating="2">★</span>
                                <span class="star" data-rating="3">★</span>
                                <span class="star" data-rating="4">★</span>
                                <span class="star" data-rating="5">★</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>리뷰 내용</label>
                            <textarea id="reviewComment" placeholder="상품에 대한 솔직한 후기를 남겨주세요." rows="4" required></textarea>
                        </div>
                        <button type="submit" class="submit-review-btn">리뷰 등록</button>
                    </form>
                </div>
            </div>

            <!-- 로그인 필요 메시지 -->
            <div class="login-required" id="loginRequired" style="display: none;">
                <div class="login-required-card">
                    <p>리뷰를 작성하려면 로그인이 필요합니다.</p>
                    <button onclick="goToLogin()">로그인하기</button>
                </div>
            </div>

            <!-- 리뷰 목록 -->
            <div class="review-list" id="reviewList">
                <!-- JavaScript로 동적 생성 -->
            </div>
        </div>
    </div>
</main>

<script th:src="@{/js/script.js}"></script>
</body>
</html>